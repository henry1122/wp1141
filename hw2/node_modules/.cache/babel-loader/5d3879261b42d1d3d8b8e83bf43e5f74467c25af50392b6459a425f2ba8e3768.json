{"ast":null,"code":"export let Difficulty = /*#__PURE__*/function (Difficulty) {\n  Difficulty[\"EASY\"] = \"easy\";\n  Difficulty[\"MEDIUM\"] = \"medium\";\n  Difficulty[\"HARD\"] = \"hard\";\n  Difficulty[\"SUPER\"] = \"super\";\n  Difficulty[\"GOD\"] = \"god\";\n  return Difficulty;\n}({});\nexport const LEVEL_CONFIGS = {\n  [Difficulty.EASY]: {\n    id: Difficulty.EASY,\n    name: '初心者',\n    nameEn: 'Easy',\n    description: '適合新手的輕鬆關卡',\n    descriptionEn: 'Perfect for beginners',\n    targetScore: 300,\n    dropInterval: 8000,\n    minMatchCount: 3,\n    specialBallChance: 0.1,\n    colors: 4,\n    timeLimit: 120,\n    // 2分鐘\n    background: {\n      gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n      particles: false\n    },\n    unlockScore: 0\n  },\n  [Difficulty.MEDIUM]: {\n    id: Difficulty.MEDIUM,\n    name: '進階者',\n    nameEn: 'Medium',\n    description: '稍有挑戰的中等難度',\n    descriptionEn: 'Moderate challenge awaits',\n    targetScore: 800,\n    dropInterval: 6000,\n    minMatchCount: 3,\n    specialBallChance: 0.15,\n    colors: 5,\n    timeLimit: 90,\n    // 1.5分鐘\n    background: {\n      gradient: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n      particles: true,\n      animation: 'wave'\n    },\n    unlockScore: 300\n  },\n  [Difficulty.HARD]: {\n    id: Difficulty.HARD,\n    name: '專家級',\n    nameEn: 'Hard',\n    description: '需要策略思考的困難關卡',\n    descriptionEn: 'Strategic thinking required',\n    targetScore: 2000,\n    dropInterval: 4000,\n    minMatchCount: 3,\n    specialBallChance: 0.2,\n    colors: 6,\n    timeLimit: 120,\n    // 2分鐘\n    background: {\n      gradient: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n      particles: true,\n      animation: 'pulse'\n    },\n    unlockScore: 800\n  },\n  [Difficulty.SUPER]: {\n    id: Difficulty.SUPER,\n    name: '超級挑戰',\n    nameEn: 'Super',\n    description: '極限挑戰，高手專屬',\n    descriptionEn: 'Ultimate challenge for experts',\n    targetScore: 5000,\n    dropInterval: 2000,\n    minMatchCount: 3,\n    specialBallChance: 0.25,\n    colors: 6,\n    timeLimit: 240,\n    // 4分鐘\n    background: {\n      gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n      particles: true,\n      animation: 'rotate'\n    },\n    unlockScore: 2000\n  },\n  [Difficulty.GOD]: {\n    id: Difficulty.GOD,\n    name: '神級大師',\n    nameEn: 'God',\n    description: '傳說中的最高難度',\n    descriptionEn: 'Legendary difficulty',\n    targetScore: 12000,\n    dropInterval: 1000,\n    minMatchCount: 4,\n    specialBallChance: 0.3,\n    colors: 6,\n    timeLimit: 420,\n    // 7分鐘\n    background: {\n      gradient: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%), linear-gradient(45deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%)',\n      particles: true,\n      animation: 'matrix'\n    },\n    unlockScore: 5000\n  }\n};\nexport const getLevelByScore = score => {\n  const levels = Object.values(LEVEL_CONFIGS).sort((a, b) => b.unlockScore - a.unlockScore);\n  return levels.find(level => score >= level.unlockScore) || LEVEL_CONFIGS[Difficulty.EASY];\n};\nexport const getNextLevel = currentLevel => {\n  const levels = [Difficulty.EASY, Difficulty.MEDIUM, Difficulty.HARD, Difficulty.SUPER, Difficulty.GOD];\n  const currentIndex = levels.indexOf(currentLevel);\n  const nextIndex = currentIndex + 1;\n  if (nextIndex < levels.length) {\n    return LEVEL_CONFIGS[levels[nextIndex]];\n  }\n  return null;\n};\nexport const isLevelUnlocked = (level, highScore) => {\n  // Easy 關卡總是解鎖的\n  if (level === Difficulty.EASY) {\n    return true;\n  }\n  return highScore >= LEVEL_CONFIGS[level].unlockScore;\n};\n\n// 檢查關卡是否可以被當前玩家選擇（考慮當前進度）\nexport const canSelectLevel = (level, highScore, currentLevel) => {\n  // Easy 總是可以選擇\n  if (level === Difficulty.EASY) {\n    return true;\n  }\n\n  // 如果已經解鎖，就可以選擇\n  if (isLevelUnlocked(level, highScore)) {\n    return true;\n  }\n\n  // 如果當前關卡等級高於或等於目標關卡，也可以選擇\n  const levels = [Difficulty.EASY, Difficulty.MEDIUM, Difficulty.HARD, Difficulty.SUPER, Difficulty.GOD];\n  const currentIndex = levels.indexOf(currentLevel);\n  const targetIndex = levels.indexOf(level);\n  return currentIndex >= targetIndex;\n};","map":{"version":3,"names":["Difficulty","LEVEL_CONFIGS","EASY","id","name","nameEn","description","descriptionEn","targetScore","dropInterval","minMatchCount","specialBallChance","colors","timeLimit","background","gradient","particles","unlockScore","MEDIUM","animation","HARD","SUPER","GOD","getLevelByScore","score","levels","Object","values","sort","a","b","find","level","getNextLevel","currentLevel","currentIndex","indexOf","nextIndex","length","isLevelUnlocked","highScore","canSelectLevel","targetIndex"],"sources":["C:/Users/User/Desktop/wp1141/hw2/src/types/levels.ts"],"sourcesContent":["export enum Difficulty {\r\n  EASY = 'easy',\r\n  MEDIUM = 'medium',\r\n  HARD = 'hard',\r\n  SUPER = 'super',\r\n  GOD = 'god'\r\n}\r\n\r\nexport interface LevelConfig {\r\n  id: Difficulty;\r\n  name: string;\r\n  nameEn: string;\r\n  description: string;\r\n  descriptionEn: string;\r\n  targetScore: number;\r\n  dropInterval: number;\r\n  minMatchCount: number;\r\n  specialBallChance: number;\r\n  colors: number;\r\n  timeLimit: number; // 時間限制（秒）\r\n  background: {\r\n    gradient: string;\r\n    particles?: boolean;\r\n    animation?: string;\r\n  };\r\n  unlockScore: number;\r\n}\r\n\r\nexport const LEVEL_CONFIGS: Record<Difficulty, LevelConfig> = {\r\n  [Difficulty.EASY]: {\r\n    id: Difficulty.EASY,\r\n    name: '初心者',\r\n    nameEn: 'Easy',\r\n    description: '適合新手的輕鬆關卡',\r\n    descriptionEn: 'Perfect for beginners',\r\n    targetScore: 300,\r\n    dropInterval: 8000,\r\n    minMatchCount: 3,\r\n    specialBallChance: 0.1,\r\n    colors: 4,\r\n    timeLimit: 120, // 2分鐘\r\n    background: {\r\n      gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      particles: false,\r\n    },\r\n    unlockScore: 0,\r\n  },\r\n  [Difficulty.MEDIUM]: {\r\n    id: Difficulty.MEDIUM,\r\n    name: '進階者',\r\n    nameEn: 'Medium',\r\n    description: '稍有挑戰的中等難度',\r\n    descriptionEn: 'Moderate challenge awaits',\r\n    targetScore: 800,\r\n    dropInterval: 6000,\r\n    minMatchCount: 3,\r\n    specialBallChance: 0.15,\r\n    colors: 5,\r\n    timeLimit: 90, // 1.5分鐘\r\n    background: {\r\n      gradient: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\r\n      particles: true,\r\n      animation: 'wave',\r\n    },\r\n    unlockScore: 300,\r\n  },\r\n  [Difficulty.HARD]: {\r\n    id: Difficulty.HARD,\r\n    name: '專家級',\r\n    nameEn: 'Hard',\r\n    description: '需要策略思考的困難關卡',\r\n    descriptionEn: 'Strategic thinking required',\r\n    targetScore: 2000,\r\n    dropInterval: 4000,\r\n    minMatchCount: 3,\r\n    specialBallChance: 0.2,\r\n    colors: 6,\r\n    timeLimit: 120, // 2分鐘\r\n    background: {\r\n      gradient: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\r\n      particles: true,\r\n      animation: 'pulse',\r\n    },\r\n    unlockScore: 800,\r\n  },\r\n  [Difficulty.SUPER]: {\r\n    id: Difficulty.SUPER,\r\n    name: '超級挑戰',\r\n    nameEn: 'Super',\r\n    description: '極限挑戰，高手專屬',\r\n    descriptionEn: 'Ultimate challenge for experts',\r\n    targetScore: 5000,\r\n    dropInterval: 2000,\r\n    minMatchCount: 3,\r\n    specialBallChance: 0.25,\r\n    colors: 6,\r\n    timeLimit: 240, // 4分鐘\r\n    background: {\r\n      gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\r\n      particles: true,\r\n      animation: 'rotate',\r\n    },\r\n    unlockScore: 2000,\r\n  },\r\n  [Difficulty.GOD]: {\r\n    id: Difficulty.GOD,\r\n    name: '神級大師',\r\n    nameEn: 'God',\r\n    description: '傳說中的最高難度',\r\n    descriptionEn: 'Legendary difficulty',\r\n    targetScore: 12000,\r\n    dropInterval: 1000,\r\n    minMatchCount: 4,\r\n    specialBallChance: 0.3,\r\n    colors: 6,\r\n    timeLimit: 420, // 7分鐘\r\n    background: {\r\n      gradient: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%), linear-gradient(45deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%)',\r\n      particles: true,\r\n      animation: 'matrix',\r\n    },\r\n    unlockScore: 5000,\r\n  },\r\n};\r\n\r\nexport const getLevelByScore = (score: number): LevelConfig => {\r\n  const levels = Object.values(LEVEL_CONFIGS).sort((a, b) => b.unlockScore - a.unlockScore);\r\n  return levels.find(level => score >= level.unlockScore) || LEVEL_CONFIGS[Difficulty.EASY];\r\n};\r\n\r\nexport const getNextLevel =  (currentLevel: Difficulty): LevelConfig | null => {\r\n  const levels = [Difficulty.EASY, Difficulty.MEDIUM, Difficulty.HARD, Difficulty.SUPER, Difficulty.GOD];\r\n  const currentIndex = levels.indexOf(currentLevel);\r\n  const nextIndex = currentIndex + 1;\r\n  \r\n  if (nextIndex < levels.length) {\r\n    return LEVEL_CONFIGS[levels[nextIndex]];\r\n  }\r\n  \r\n  return null;\r\n};\r\n\r\nexport const isLevelUnlocked = (level: Difficulty, highScore: number): boolean => {\r\n  // Easy 關卡總是解鎖的\r\n  if (level === Difficulty.EASY) {\r\n    return true;\r\n  }\r\n  return highScore >= LEVEL_CONFIGS[level].unlockScore;\r\n};\r\n\r\n// 檢查關卡是否可以被當前玩家選擇（考慮當前進度）\r\nexport const canSelectLevel = (level: Difficulty, highScore: number, currentLevel: Difficulty): boolean => {\r\n  // Easy 總是可以選擇\r\n  if (level === Difficulty.EASY) {\r\n    return true;\r\n  }\r\n  \r\n  // 如果已經解鎖，就可以選擇\r\n  if (isLevelUnlocked(level, highScore)) {\r\n    return true;\r\n  }\r\n  \r\n  // 如果當前關卡等級高於或等於目標關卡，也可以選擇\r\n  const levels = [Difficulty.EASY, Difficulty.MEDIUM, Difficulty.HARD, Difficulty.SUPER, Difficulty.GOD];\r\n  const currentIndex = levels.indexOf(currentLevel);\r\n  const targetIndex = levels.indexOf(level);\r\n  \r\n  return currentIndex >= targetIndex;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}